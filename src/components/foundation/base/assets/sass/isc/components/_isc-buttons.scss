/*
  BUTTONS
  ----------
  Includes basic style variations for a collection of commonly used button types.
   - Basic Buttons, size & color variations
   - Prefix, Postfix
   - Button Utilities
*/

/* Button Settings */
$button-padding: 0.75em 1em !default;
$button-margin: 0 0 1rem 0 !default;
$button-style: solid !default;
$button-background: $accent-color !default;
$button-background-hover: scale-color($button-background, $lightness: -15%) !default;
$button-color: auto !default;
$button-radius: $global-radius !default;
$button-sizes: (
   tiny: 0.7,
   small: 0.8,
   medium: 1,
   large: 1.3,
 ) !default;
$button-font-size: 1rem !default;
$button-opacity-disabled: 0.5 !default;
$button-cancel-background: $gray !default;
$button-tag-selector: true;

/* Style Exports */
@include exports(buttons) {
  /* Support for input[type="submit"] and input[type="button"] */
  input[type="submit"], input[type="button"] {
    @extend .button;
  }

  button, .button, input[type="submit"], input[type="button"] {

    &.chunky {
      border-bottom: 3px solid scale-color($button-background, $lightness: -14%);
      box-shadow: rgba(0, 0, 0, 0.12) 0px 1px 1px 0px;

      &:hover, &:focus {
        border-bottom-color: scale-color($button-background, $lightness: -24%);
        color: isitlight($button-background, $body-font-color, $light-text);
      }
    }

    &.dropdown {
      position: relative;
      padding-#{$global-right}: 2rem; // Placeholder

      @include bidirectional() {
        padding-left: 2rem;
      }
    }

    @each $color in map-keys($theme-colors) {

    &.#{$color} {
      $color-name: map-get($theme-colors, $color);
        @include button-style(
          $background: $color-name,
          $background-hover: scale-color($color-name, $lightness: -15%),
          $color: isitlight($color-name, $body-font-color, $light-text)
        );

        &.chunky {
          border-bottom: 3px solid scale-color($color-name, $lightness: -14%);
          box-shadow: rgba(0, 0, 0, 0.12) 0px 1px 1px 0px;

          &:hover, &:focus {
            border-bottom-color: scale-color($color-name, $lightness: -14%);
            color: isitlight($button-background-hover, $body-font-color, $light-text);
          }
        }

        &.dropdown {

          @include ltr() {
            &::after {
              //@include css-triangle(6px, inherit, top);
              @include css-triangle(6px, isitlight($color-name, $body-font-color, $light-text), top);
              position: absolute;
              #{$global-right}: 0.7rem;
              top: 50%;
              margin-top: -3px;
            }
          }

          @include bidirectional() {
            &::before {
              @include css-triangle(6px, isitlight($color-name, $body-font-color, $light-text), top);
              position: absolute;
              left: 0.7rem;
              top: 50%;
              margin-top: -3px;
            }
            &::after {display: none;}
          }
        }

        &.hollow {
          @include button-style(
            $background-hover: transparent,
            $color: scale-color($color-name, $lightness: -10%)
          );
          background: transparent;
          border-color: $color-name;

          &:hover, &:focus {
            color: scale-color($color-name, $lightness: -12%);
            border-color: scale-color($color-name, $lightness: -12%);
            background: scale-color($body-background, $lightness: -5%);
          }

          &.dropdown {
            @include ltr() {
              &::after {
                border-top-color: $color-name;
              }
            }

            @include bidirectional() {
              &::before {
                border-top-color: $color-name;
              }
              &::after {display: none;}
            }
          }
        }
      }
    }

    &.cancel {
      @include button-style(
        $background: $button-cancel-background,
        $background-hover: auto, // generate dynamically
        $color: isitlight($button-cancel-background, $body-font-color, $light-text),
        $style: solid //solid or hollow
      );

      &.hollow {
        background: transparent;
        color: scale-color($button-cancel-background, $lightness: -25%);
        border-color: scale-color($button-cancel-background, $lightness: -25%);

        &:hover, &:focus {
          color: scale-color($button-cancel-background, $lightness: -40%);
          border-color: scale-color($button-cancel-background, $lightness: -40%);
        }
      }

      &.chunky {
        border-bottom-color: scale-color($button-cancel-background, $lightness: -14%);

        &:hover, &:focus {
          border-bottom-color: scale-color($button-cancel-background, $lightness: -24%);
          color: isitlight($button-cancel-background, $body-font-color, $light-text);
        }
      }
    }
  }

  /* Button Utilities  */
  button, .button, input[type="submit"], input[type="button"] {

    &:focus {outline: none;} //No outline on Focus

    &.flat {margin: 0;} //Removes margin
  }

  /* Prefixed/Postfixed Buttons */
  button, .button, input[type="submit"], input[type="button"] {

    .prefix &, .postfix & {
      margin: 0;
      padding: 0.5em 0.75em;
      text-align: center;
    }

    &.prefix , .prefix & {
      border-radius: radius-values($global-radius 0 0 $global-radius);

      @include bidirectional() {
        border-radius: 0 $global-radius $global-radius 0;
      }
    }
    &.postfix, .postfix & {
      border-radius: radius-values(0 $global-radius $global-radius 0);
      flex-wrap: nowrap;
      white-space: nowrap;

      @include bidirectional() {
        border-radius: $global-radius 0 0 $global-radius;
      }
    }
  }
}
